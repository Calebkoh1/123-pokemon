function _0x23bd(_0x5b2fdc,_0x5e42e0){const _0x31137f=_0x3113();return _0x23bd=function(_0x23bdc5,_0x381071){_0x23bdc5=_0x23bdc5-0x121;let _0x559738=_0x31137f[_0x23bdc5];return _0x559738;},_0x23bd(_0x5b2fdc,_0x5e42e0);}function _0x3113(){const _0x37b810=['add','value','Please\x20enter\x20a\x20valid\x20SKU/TCIN.','proxyConfig','toggle','Profiles\x20loaded\x20into\x20dropdown','runtime','querySelectorAll','textContent','price_check_enabled','createElement','log','map','click','catch','Updated\x20Target\x20quantity\x20from\x20storage\x20change:','port','onChanged','Storage\x20changes\x20detected:','Initial\x20toggle\x20state:','price-check-settings-btn','price-check-item-sku','classList','.site-config','SKUs\x20copied\x20to\x20clipboard!','className','Could\x20not\x20recover\x20from\x20localStorage:','Remove\x20price\x20check\x20for\x20SKU\x20\x22','empty-message','get','flex','trim','hasOwnProperty','error','14uymmjF','applyProxy','No\x20price\x20checks\x20added\x20yet.','Saving\x20quantity\x20for\x20','768GPkTSm','name','local','onclick','change','getElementById','querySelector','Setting\x20','copy-max-price-btn','Updated\x20Target\x20toggle\x20from\x20storage\x20change:','profiles','display','split','checked','addEventListener','autoCloseCartPage','storage','siteSettings','Failed\x20to\x20copy\x20SKUs\x20with\x20max\x20prices.','host','appendChild','3460984qhfVom','none','price-check-active-toggle-settings','18620954WJQqki','4910AIHkFf','clipboard','apply','toggle-active','\x20items.','set','remove','144ypjYdd','price-check-sku-input','sort','1497ZZluoM','enabled','length','useBuyNowWhenAvailable','tabs','Settings\x20loaded:','proxy-settings-section','message','568029UfhsAW','3334rODRPt','price_check_closeTabOnFail','newValue','\x20enabled\x20state:\x20','419990zynyUl','sendMessage','lastError','use-buy-now','style','target','entries','Fallback\x20handler:\x20toggle\x20changed\x20to\x20','1529328BPEOBJ','Could\x20not\x20send\x20quantity\x20update\x20to\x20tab:\x20','Updated\x20global\x20settings\x20from\x20storage\x20change','then','quantity'];_0x3113=function(){return _0x37b810;};return _0x3113();}(function(_0xd2664d,_0x465836){const _0xa7b451=_0x23bd,_0x3a3af7=_0xd2664d();while(!![]){try{const _0x30d0da=parseInt(_0xa7b451(0x160))/0x1+parseInt(_0xa7b451(0x161))/0x2*(-parseInt(_0xa7b451(0x158))/0x3)+-parseInt(_0xa7b451(0x16d))/0x4+parseInt(_0xa7b451(0x14e))/0x5*(-parseInt(_0xa7b451(0x135))/0x6)+parseInt(_0xa7b451(0x131))/0x7*(-parseInt(_0xa7b451(0x14a))/0x8)+-parseInt(_0xa7b451(0x155))/0x9*(-parseInt(_0xa7b451(0x165))/0xa)+parseInt(_0xa7b451(0x14d))/0xb;if(_0x30d0da===_0x465836)break;else _0x3a3af7['push'](_0x3a3af7['shift']());}catch(_0x1bb630){_0x3a3af7['push'](_0x3a3af7['shift']());}}}(_0x3113,0xb1aa8),document['addEventListener']('DOMContentLoaded',async function(){const _0x27ab39=_0x23bd;console['log']('Popup\x20initialized');const _0x552c79=document['getElementById']('auto-submit'),_0x42a712=document['getElementById'](_0x27ab39(0x168)),_0x3e9c08=document[_0x27ab39(0x13a)]('auto-close-oos'),statusTextElement=document['getElementById']('status-text'),statusElement=document['querySelector']('.status'),_0x272d79=document['querySelector']('.sites-config'),_0x53f76c=document['getElementById']('global-settings'),_0x19939b=document['getElementById'](_0x27ab39(0x15e)),_0xe73de5=document['getElementById']('proxy-input'),priceCheckMainView=document['getElementById']('price-check-main-view'),priceCheckSettingsView=document[_0x27ab39(0x13a)]('price-check-settings-view'),priceCheckSettingsBtn=document[_0x27ab39(0x13a)](_0x27ab39(0x123)),priceCheckBackBtn=document[_0x27ab39(0x13a)]('price-check-back-btn'),priceCheckActiveToggleMain=document[_0x27ab39(0x13a)]('price-check-active-toggle'),priceCheckStatusMain=document['getElementById']('price-check-status-main'),priceCheckStatusEl=document['getElementById']('price-check-status'),priceCheckActiveToggleSettings=document['getElementById'](_0x27ab39(0x14c)),priceCheckCloseTabToggle=document['getElementById']('price-check-close-tab-toggle'),priceCheckItemsContainer=document[_0x27ab39(0x13a)]('price-check-items-container'),priceCheckSkuInput=document['getElementById'](_0x27ab39(0x156)),priceCheckPriceInput=document['getElementById']('price-check-price-input'),priceCheckAddBtn=document['getElementById']('price-check-add-btn'),priceCheckMassInput=document['getElementById']('price-check-mass-input'),priceCheckMassAddBtn=document['getElementById']('price-check-mass-add-btn'),copySkusBtn=document[_0x27ab39(0x13a)]('copy-skus-btn'),copyMaxPriceBtn=document['getElementById'](_0x27ab39(0x13d)),_0xdf3691={};let price_check_items={},price_check_enabled=![],price_check_closeTabOnFail=![],price_check_statusTimeout;console['log']('Starting\x20initialization...'),_0x457677(),await _0x30897a(),_0x5876ed(),console['log']('Initialization\x20complete');function _0x457677(){const _0x518cf0=_0x27ab39,_0x1c9d73=_0x272d79[_0x518cf0(0x179)](_0x518cf0(0x126));_0x1c9d73['forEach'](_0x4e9fc0=>{const _0xe3f79b=_0x518cf0,_0x3c72f0=_0x4e9fc0['getAttribute']('data-site');_0x3c72f0&&(_0xdf3691[_0x3c72f0]={'toggle':_0x4e9fc0[_0xe3f79b(0x13b)]('.site-toggle'),'quantity':_0x4e9fc0['querySelector']('.site-quantity'),'profileSelect':_0x4e9fc0[_0xe3f79b(0x13b)]('.site-profile-select')});}),console['log']('Initialized\x20site\x20controls:',_0xdf3691);}function _0x5876ed(){const _0x560c14=_0x27ab39;console['log']('Setting\x20up\x20event\x20listeners...');for(const _0xa5980c in _0xdf3691){const _0x2616f8=_0xdf3691[_0xa5980c];_0x2616f8['toggle']&&_0x2616f8['toggle']['addEventListener']('change',_0x2263fa=>{const _0x399857=_0x23bd,enabled=_0x2263fa['target']['checked'];console['log'](_0x399857(0x13c)+_0xa5980c+'\x20enabled\x20to:\x20'+enabled),chrome['storage']['local']['get']('siteSettings',_0x2189aa=>{const _0x3a25fc=_0x2189aa['siteSettings']||{};if(!_0x3a25fc[_0xa5980c])_0x3a25fc[_0xa5980c]={};_0x3a25fc[_0xa5980c]['enabled']=enabled,chrome['storage']['local']['set']({'siteSettings':_0x3a25fc},()=>{const _0x41b8f1=_0x23bd;chrome['runtime']['lastError']?console['error']('Error\x20saving\x20'+_0xa5980c+'\x20enabled\x20state:',chrome['runtime']['lastError']):console['log']('Successfully\x20saved\x20'+_0xa5980c+_0x41b8f1(0x164)+enabled);});});}),_0x2616f8['quantity']&&_0x2616f8['quantity']['addEventListener']('change',_0x410561=>{const _0x2e7b1a=_0x23bd,_0x43ac3b=parseInt(_0x410561[_0x2e7b1a(0x16a)]['value'])||0x1;chrome[_0x2e7b1a(0x145)][_0x2e7b1a(0x137)]['get'](_0x2e7b1a(0x146),_0xcb0231=>{const _0x4a9a60=_0x2e7b1a,_0x3d1b83=_0xcb0231['siteSettings']||{};if(!_0x3d1b83[_0xa5980c])_0x3d1b83[_0xa5980c]={};_0x3d1b83[_0xa5980c]['quantity']=_0x43ac3b,console[_0x4a9a60(0x17d)](_0x4a9a60(0x134)+_0xa5980c+':\x20'+_0x43ac3b),chrome[_0x4a9a60(0x145)]['local']['set']({'siteSettings':_0x3d1b83},()=>{const _0x3e2f80=_0x4a9a60;chrome['runtime']['lastError']?console[_0x3e2f80(0x130)]('Error\x20saving\x20quantity:\x20'+chrome['runtime']['lastError'][_0x3e2f80(0x15f)]):(console['log']('Quantity\x20saved\x20successfully.\x20New\x20value:\x20'+_0x43ac3b),_0xa5980c==='target'&&chrome['tabs']['query']({'url':'*://*.target.com/*'},tabs=>{tabs['length']>0x0&&tabs['forEach'](_0x41523e=>{const _0xdda37e=_0x23bd;chrome[_0xdda37e(0x15c)][_0xdda37e(0x166)](_0x41523e['id'],{'action':'updateSiteSetting','site':_0xdda37e(0x16a),'siteSettings':{'quantity':_0x43ac3b}})['catch'](_0x5ba2ce=>console['warn'](_0xdda37e(0x16e)+_0x5ba2ce['message']));});}));});});}),_0x2616f8['profileSelect']&&_0x2616f8['profileSelect']['addEventListener']('change',_0x147455=>{const _0x55002f=_0x147455['target']['value'];chrome['storage']['local']['get']('siteSettings',_0x13724=>{const _0x2982b4=_0x23bd,_0x58e615=_0x13724['siteSettings']||{};if(!_0x58e615[_0xa5980c])_0x58e615[_0xa5980c]={};_0x58e615[_0xa5980c]['profileId']=_0x55002f,console['log']('Saving\x20profile\x20selection\x20for\x20'+_0xa5980c+':\x20'+_0x55002f),chrome[_0x2982b4(0x145)]['local'][_0x2982b4(0x153)]({'siteSettings':_0x58e615},()=>{const _0x510858=_0x2982b4;chrome['runtime']['lastError']?console[_0x510858(0x130)]('Error\x20saving\x20profile\x20selection:\x20'+chrome['runtime']['lastError']['message']):console['log']('Profile\x20selection\x20saved\x20successfully.\x20New\x20value:\x20'+_0x55002f);});});});}_0x552c79['addEventListener']('change',_0x318f6a=>{updateGlobalSetting('autoSubmit',_0x318f6a['target']['checked']);}),_0x42a712['addEventListener']('change',_0x3efe5e=>{const _0x9cfac8=_0x23bd;updateGlobalSetting(_0x9cfac8(0x15b),_0x3efe5e[_0x9cfac8(0x16a)][_0x9cfac8(0x142)]);}),_0x3e9c08[_0x560c14(0x143)]('change',_0x1a798b=>{const _0x359dce=_0x560c14;updateGlobalSetting(_0x359dce(0x144),_0x1a798b[_0x359dce(0x16a)]['checked']);});_0xe73de5&&(_0xe73de5[_0x560c14(0x143)]('change',handleProxyChange),_0xe73de5['addEventListener']('blur',handleProxyChange));console['log']('Setting\x20up\x20Price\x20Check\x20navigation,\x20button\x20exists:',!!priceCheckSettingsBtn);priceCheckSettingsBtn?priceCheckSettingsBtn['addEventListener'](_0x560c14(0x17f),()=>{const _0x48fc82=_0x560c14;console['log']('Price\x20Check\x20Settings\x20button\x20clicked'),_0x272d79[_0x48fc82(0x169)]['display']='none',_0x53f76c[_0x48fc82(0x169)]['display']='none',priceCheckMainView['style']['display']=_0x48fc82(0x14b),_0x19939b[_0x48fc82(0x169)][_0x48fc82(0x140)]=_0x48fc82(0x14b),statusElement[_0x48fc82(0x169)]['display']='none',priceCheckSettingsView['style']['display']='block';}):console['error']('Price\x20Check\x20Settings\x20button\x20not\x20found\x20in\x20DOM');priceCheckBackBtn&&priceCheckBackBtn['addEventListener']('click',()=>{const _0x78964f=_0x560c14;console['log']('Price\x20Check\x20Back\x20button\x20clicked'),priceCheckSettingsView['style'][_0x78964f(0x140)]='none',_0x272d79[_0x78964f(0x169)]['display']=_0x78964f(0x12d),_0x53f76c['style'][_0x78964f(0x140)]='block',priceCheckMainView['style']['display']='block',_0x19939b[_0x78964f(0x169)]['display']='block',statusElement['style']['display']='flex';});const priceCheckToggleActiveHandler=_0x415f13=>{const _0x18e903=_0x560c14,_0x4b13ee=_0x415f13[_0x18e903(0x16a)]['checked'];console['log']('Price\x20Check\x20toggle\x20changed\x20to:',_0x4b13ee),price_check_enabled=_0x4b13ee;if(priceCheckActiveToggleMain)priceCheckActiveToggleMain['checked']=_0x4b13ee;if(priceCheckActiveToggleSettings)priceCheckActiveToggleSettings['checked']=_0x4b13ee;updatePriceCheckStatusDisplay(),chrome['storage'][_0x18e903(0x137)]['set']({'price_check_enabled':_0x4b13ee});};priceCheckActiveToggleMain&&priceCheckActiveToggleMain['addEventListener'](_0x560c14(0x139),priceCheckToggleActiveHandler);priceCheckActiveToggleSettings&&priceCheckActiveToggleSettings['addEventListener']('change',priceCheckToggleActiveHandler);if(priceCheckCloseTabToggle){console['log'](_0x560c14(0x122),priceCheckCloseTabToggle['checked']);const toggleContainer=priceCheckCloseTabToggle['closest']('.toggle-wrapper')||priceCheckCloseTabToggle['parentElement'];toggleContainer?(console[_0x560c14(0x17d)]('Found\x20toggle\x20container,\x20attaching\x20click\x20handler'),toggleContainer['addEventListener'](_0x560c14(0x17f),_0xd77c44=>{const _0x38848b=_0x560c14;price_check_closeTabOnFail=!price_check_closeTabOnFail,priceCheckCloseTabToggle['checked']=price_check_closeTabOnFail,console['log']('Toggle\x20clicked!\x20New\x20state:',price_check_closeTabOnFail),console['log']('Checkbox\x20checked\x20property:',priceCheckCloseTabToggle['checked']),price_check_closeTabOnFail?toggleContainer['classList'][_0x38848b(0x172)](_0x38848b(0x151)):toggleContainer[_0x38848b(0x125)]['remove']('toggle-active'),chrome['storage']['local'][_0x38848b(0x153)]({'price_check_closeTabOnFail':price_check_closeTabOnFail},()=>{const _0x534edd=_0x38848b;chrome['runtime'][_0x534edd(0x167)]?console['error']('Error\x20saving\x20close\x20tab\x20setting:',chrome[_0x534edd(0x178)]['lastError']):(console[_0x534edd(0x17d)]('Close\x20tab\x20on\x20fail\x20setting\x20saved\x20successfully:\x20'+price_check_closeTabOnFail),chrome['storage']['local']['get'](['price_check_closeTabOnFail'],_0x4851cf=>{const _0x2f14af=_0x534edd;console['log']('Verified\x20state\x20in\x20storage:',_0x4851cf[_0x2f14af(0x162)]);}));}),_0xd77c44['preventDefault'](),_0xd77c44['stopPropagation']();}),priceCheckCloseTabToggle[_0x560c14(0x143)]('change',_0x356cdd=>{const _0xdc596c=_0x560c14;console['log']('Checkbox\x20change\x20event\x20triggered,\x20current\x20checked:',_0x356cdd['target'][_0xdc596c(0x142)]),_0x356cdd['stopPropagation']();})):(console['error']('Could\x20not\x20find\x20toggle\x20container\x20for\x20click\x20handler!'),priceCheckCloseTabToggle['addEventListener']('change',_0x2076af=>{const _0x5c5394=_0x560c14;price_check_closeTabOnFail=_0x2076af[_0x5c5394(0x16a)]['checked'],console[_0x5c5394(0x17d)](_0x5c5394(0x16c)+price_check_closeTabOnFail),chrome['storage'][_0x5c5394(0x137)]['set']({'price_check_closeTabOnFail':price_check_closeTabOnFail});}));}priceCheckAddBtn&&priceCheckAddBtn['addEventListener']('click',addPriceCheckItem),priceCheckSkuInput&&priceCheckSkuInput['addEventListener']('keydown',_0x595337=>{if(_0x595337['key']==='Enter')addPriceCheckItem();}),priceCheckMassAddBtn&&priceCheckMassAddBtn['addEventListener'](_0x560c14(0x17f),addPriceCheckItemsBulk),copySkusBtn&&copySkusBtn['addEventListener'](_0x560c14(0x17f),copySkusToClipboard),copyMaxPriceBtn&&copyMaxPriceBtn['addEventListener'](_0x560c14(0x17f),copyMaxPriceToClipboard),chrome['storage'][_0x560c14(0x183)]['addListener'](handleStorageChanges),console['log']('All\x20event\x20listeners\x20set\x20up');}function _0x4fa880(_0x2af1f0,_0x3b16a1){let _0x2f5f7b;return function(..._0x9deba1){const _0x1b3e89=_0x23bd;clearTimeout(_0x2f5f7b),_0x2f5f7b=setTimeout(()=>_0x2af1f0[_0x1b3e89(0x150)](this,_0x9deba1),_0x3b16a1);};}function handleProxyChange(_0x536e55){const _0x236eda=_0x27ab39,_0x503f10=_0x536e55['target']['value'][_0x236eda(0x12e)]();if(!_0x503f10){chrome['storage']['local']['remove']('proxyConfig',()=>{const _0x3436de=_0x236eda;chrome[_0x3436de(0x178)]['sendMessage']({'action':'clearProxy'});});return;}const _0x222905=_0x503f10['split'](':');let _0x233828=null;if(_0x222905[_0x236eda(0x15a)]===0x2)_0x233828={'host':_0x222905[0x0],'port':_0x222905[0x1]};else _0x222905['length']===0x4&&(_0x233828={'host':_0x222905[0x0],'port':_0x222905[0x1],'username':_0x222905[0x2],'password':_0x222905[0x3]});_0x233828&&chrome['storage']['local']['set']({'proxyConfig':_0x233828},()=>{const _0x765d55=_0x236eda;chrome[_0x765d55(0x178)]['sendMessage']({'action':_0x765d55(0x132),'proxyConfig':_0x233828});});}async function handleStorageChanges(changes,_0x2cc3cb){const _0xa6ee70=_0x27ab39;console['log'](_0xa6ee70(0x121),_0x2cc3cb,changes);if(_0x2cc3cb==='local'){if(changes['siteSettings']){console[_0xa6ee70(0x17d)]('siteSettings\x20changed:',changes[_0xa6ee70(0x146)][_0xa6ee70(0x163)]);const _0x3c8239=changes['siteSettings']['newValue']?.[_0xa6ee70(0x16a)];_0x3c8239&&_0xdf3691['target']&&(console['log']('Target\x20settings\x20from\x20storage\x20change:',_0x3c8239),_0xdf3691[_0xa6ee70(0x16a)][_0xa6ee70(0x176)]&&_0x3c8239[_0xa6ee70(0x12f)]('enabled')&&(_0xdf3691['target'][_0xa6ee70(0x176)]['checked']=_0x3c8239[_0xa6ee70(0x159)]===!![],console[_0xa6ee70(0x17d)](_0xa6ee70(0x13e),_0x3c8239[_0xa6ee70(0x159)])),_0xdf3691['target']['quantity']&&_0x3c8239['hasOwnProperty']('quantity')&&(_0xdf3691[_0xa6ee70(0x16a)][_0xa6ee70(0x171)]['value']=_0x3c8239['quantity'],console['log'](_0xa6ee70(0x181),_0x3c8239['quantity'])),_0xdf3691['target']['profileSelect']&&_0x3c8239[_0xa6ee70(0x12f)]('profileId')&&(_0xdf3691['target']['profileSelect'][_0xa6ee70(0x173)]=_0x3c8239['profileId'],console['log']('Updated\x20Target\x20profile\x20from\x20storage\x20change:',_0x3c8239['profileId'])));}changes['enabled']&&_0xdf3691['target']?.[_0xa6ee70(0x176)]&&(console['log']('Global\x20\x27enabled\x27\x20flag\x20changed\x20(legacy):',changes['enabled'][_0xa6ee70(0x163)]),_0xdf3691[_0xa6ee70(0x16a)]['toggle']['checked']=changes['enabled']['newValue']===!![]);if(changes['globalSettings']){const _0x5ccccc=changes['globalSettings'][_0xa6ee70(0x163)]||{};_0x552c79[_0xa6ee70(0x142)]=_0x5ccccc['autoSubmit']!==![],_0x42a712['checked']=_0x5ccccc[_0xa6ee70(0x15b)]===!![],_0x3e9c08['checked']=_0x5ccccc[_0xa6ee70(0x144)]===!![],console[_0xa6ee70(0x17d)](_0xa6ee70(0x16f));}if(changes['proxyConfig']){const _0x584401=changes[_0xa6ee70(0x175)]['newValue'];if(_0x584401){let _0x2b5c73='';_0x584401['username']&&_0x584401['password']?_0x2b5c73=_0x584401['host']+':'+_0x584401['port']+':'+_0x584401['username']+':'+_0x584401['password']:_0x2b5c73=_0x584401[_0xa6ee70(0x148)]+':'+_0x584401['port'],_0xe73de5['value']=_0x2b5c73;}else _0xe73de5['value']='';}if(changes[_0xa6ee70(0x17b)]!==undefined){price_check_enabled=changes['price_check_enabled']['newValue'];if(priceCheckActiveToggleMain)priceCheckActiveToggleMain['checked']=price_check_enabled;if(priceCheckActiveToggleSettings)priceCheckActiveToggleSettings['checked']=price_check_enabled;updatePriceCheckStatusDisplay();}if(changes[_0xa6ee70(0x162)]!==undefined){price_check_closeTabOnFail=changes['price_check_closeTabOnFail'][_0xa6ee70(0x163)];if(priceCheckCloseTabToggle)priceCheckCloseTabToggle[_0xa6ee70(0x142)]=price_check_closeTabOnFail;}changes['price_check_items']&&(price_check_items=changes['price_check_items']['newValue']||{},renderPriceCheckItems());}}async function _0x30897a(){const _0x24b46a=_0x27ab39;try{console['log']('Loading\x20settings\x20from\x20storage...');const _0x5cf41a=await chrome['storage']['local']['get'](['enabled','siteSettings','globalSettings','proxyConfig','price_check_enabled','price_check_closeTabOnFail','price_check_items','profiles','selectedProfile']);console['log'](_0x24b46a(0x15d),_0x5cf41a);if(_0xdf3691['target']&&_0xdf3691['target']['toggle']){const _0x22bb67=_0x5cf41a['siteSettings']?.['target']?.['enabled']===!![];_0xdf3691['target']['toggle']['checked']=_0x22bb67,console['log']('Loaded\x20Target\x20toggle\x20state\x20from\x20site-specific\x20settings:',_0x22bb67),_0xdf3691['target']['quantity']&&_0x5cf41a[_0x24b46a(0x146)]?.['target']?.['quantity']&&(_0xdf3691[_0x24b46a(0x16a)]['quantity']['value']=_0x5cf41a[_0x24b46a(0x146)][_0x24b46a(0x16a)][_0x24b46a(0x171)],console['log']('Loaded\x20Target\x20quantity\x20from\x20settings:',_0x5cf41a['siteSettings']['target']['quantity']));}const _0x2a7359=_0x5cf41a['globalSettings']||{};_0x552c79['checked']=_0x2a7359['autoSubmit']!==![],_0x42a712[_0x24b46a(0x142)]=_0x2a7359['useBuyNowWhenAvailable']===!![],_0x3e9c08['checked']=_0x2a7359['autoCloseCartPage']===!![];if(_0x5cf41a['proxyConfig']){const _0x422b15=_0x5cf41a[_0x24b46a(0x175)];let _0x131b9f='';_0x422b15['username']&&_0x422b15['password']?_0x131b9f=_0x422b15['host']+':'+_0x422b15[_0x24b46a(0x182)]+':'+_0x422b15['username']+':'+_0x422b15['password']:_0x131b9f=_0x422b15[_0x24b46a(0x148)]+':'+_0x422b15[_0x24b46a(0x182)],_0xe73de5[_0x24b46a(0x173)]=_0x131b9f;}price_check_enabled=_0x5cf41a['price_check_enabled']===!![],price_check_closeTabOnFail=_0x5cf41a['price_check_closeTabOnFail']===!![],price_check_items=_0x5cf41a['price_check_items']||{},console['log']('Price\x20check\x20enabled:',price_check_enabled),priceCheckActiveToggleMain&&(priceCheckActiveToggleMain['checked']=price_check_enabled),priceCheckActiveToggleSettings&&(priceCheckActiveToggleSettings['checked']=price_check_enabled),priceCheckCloseTabToggle&&(priceCheckCloseTabToggle['checked']=price_check_closeTabOnFail),updatePriceCheckStatusDisplay(),renderPriceCheckItems(),_0x5651c0(_0x5cf41a[_0x24b46a(0x13f)],_0x5cf41a['selectedProfile']),console['log']('Settings\x20loaded\x20successfully');}catch(_0x1bae66){console['error']('Error\x20loading\x20settings:',_0x1bae66);}}function _0x5651c0(_0x1b1e00,_0x18cb80){const _0x596f14=_0x27ab39;try{console['log']('Loading\x20profiles\x20for\x20dropdown...'),console['log']('Profiles\x20data:',_0x1b1e00?_0x1b1e00['length']+'\x20profiles\x20found':'no\x20profiles');const _0x4330e7=document['querySelector']('#target-profile-select');if(!_0x4330e7){console['error']('Profile\x20dropdown\x20not\x20found');return;}while(_0x4330e7['options']['length']>0x1){_0x4330e7[_0x596f14(0x154)](0x1);}if(!_0x1b1e00||!_0x1b1e00['length']){console['warn']('No\x20profiles\x20found');return;}_0x1b1e00['forEach'](_0x269d40=>{const _0xa0ddb4=_0x596f14,_0x562c08=document['createElement']('option');_0x562c08['value']=_0x269d40['id'],_0x562c08[_0xa0ddb4(0x17a)]=_0x269d40[_0xa0ddb4(0x136)]||'Profile\x20'+_0x269d40['id'],_0x4330e7['appendChild'](_0x562c08);}),console['log'](_0x596f14(0x177)),chrome['storage']['local']['get'](_0x596f14(0x146),_0x2c3258=>{const _0x3ef7c7=_0x596f14,_0x16e1a1=_0x2c3258['siteSettings']?.['target']?.['profileId'];let _0x5d5e4f=null;if(_0x16e1a1)console[_0x3ef7c7(0x17d)]('Using\x20Target\x20site-specific\x20profile\x20ID:',_0x16e1a1),_0x5d5e4f=_0x16e1a1;else _0x18cb80&&(console['log']('Falling\x20back\x20to\x20global\x20profile\x20ID:',_0x18cb80),_0x5d5e4f=_0x18cb80);if(_0x5d5e4f){_0x4330e7['value']=_0x5d5e4f,console['log']('Selected\x20profile\x20set\x20to:',_0x5d5e4f);try{localStorage['setItem']('targetProfileId',_0x5d5e4f);}catch(_0x41795b){console['warn']('Could\x20not\x20save\x20profile\x20ID\x20to\x20localStorage:',_0x41795b);}}else console['warn']('No\x20profile\x20ID\x20found\x20to\x20select');});}catch(_0x313ff7){console['error']('Error\x20loading\x20profiles\x20for\x20dropdown:',_0x313ff7);try{const _0x4a0962=localStorage['getItem']('targetProfileId');_0x4a0962&&profileDropdown&&(console[_0x596f14(0x17d)]('Recovered\x20profile\x20ID\x20from\x20localStorage:',_0x4a0962),profileDropdown['value']=_0x4a0962);}catch(_0xeb8a37){console[_0x596f14(0x130)](_0x596f14(0x129),_0xeb8a37);}}}async function updateSiteSetting(_0x470553,_0x58e729,value){const _0x143284=_0x27ab39;try{const _0x35a224=await chrome['storage'][_0x143284(0x137)][_0x143284(0x12c)]('siteSettings'),_0x64e669=_0x35a224['siteSettings']||{};if(!_0x64e669[_0x470553])_0x64e669[_0x470553]={};_0x64e669[_0x470553][_0x58e729]=value,await chrome['storage']['local']['set']({'siteSettings':_0x64e669});}catch(_0x18abdb){console['error']('Error\x20updating\x20site\x20setting\x20'+_0x470553+'.'+_0x58e729+':',_0x18abdb);}}async function updateGlobalSetting(_0x365c94,value){const _0x5569cf=_0x27ab39;try{const _0x36e2db=await chrome['storage'][_0x5569cf(0x137)][_0x5569cf(0x12c)]('globalSettings'),_0x4c2d39=_0x36e2db['globalSettings']||{};_0x4c2d39[_0x365c94]=value,await chrome['storage']['local']['set']({'globalSettings':_0x4c2d39});}catch(_0x21bed0){console['error']('Error\x20updating\x20global\x20setting\x20'+_0x365c94+':',_0x21bed0);}}function updatePriceCheckStatusDisplay(){const _0x12c613=_0x27ab39,statusText=price_check_enabled?'Active':'Inactive',statusClass=price_check_enabled?'status-online':'status-offline';console['log']('Updating\x20price\x20check\x20status\x20display:',statusText),priceCheckStatusEl&&(priceCheckStatusEl['textContent']=statusText,priceCheckStatusEl['className']=statusClass),priceCheckStatusMain&&(priceCheckStatusMain[_0x12c613(0x17a)]=statusText,priceCheckStatusMain['className']=statusClass,priceCheckStatusMain['style']['color']=price_check_enabled?'#2ECC71':'#f04747');}function addPriceCheckItem(){const _0x4578d4=_0x27ab39,_0x4e2c47=priceCheckSkuInput['value'][_0x4578d4(0x12e)]();if(!_0x4e2c47){alert(_0x4578d4(0x174));return;}const _0x124ea4=parseFloat(priceCheckPriceInput['value']['trim']());if(isNaN(_0x124ea4)||_0x124ea4<=0x0){alert('Please\x20enter\x20a\x20valid\x20maximum\x20price.');return;}price_check_items[_0x4e2c47]=_0x124ea4,chrome['storage']['local'][_0x4578d4(0x153)]({'price_check_items':price_check_items},()=>{renderPriceCheckItems(),priceCheckSkuInput['value']='',priceCheckPriceInput['value']='';});}function addPriceCheckItemsBulk(){const _0x9dc879=_0x27ab39,input=priceCheckMassInput['value']['trim']();if(!input){alert('Please\x20enter\x20data\x20in\x20the\x20SKU;maxprice\x20format.');return;}const _0x687ab9=input[_0x9dc879(0x141)]('\x0a')['filter'](_0x16bc38=>_0x16bc38['trim']());let addedCount=0x0,_0x82e544=0x0;_0x687ab9['forEach'](_0x19a049=>{const _0x28a3b9=_0x9dc879,_0x4da3f0=_0x19a049['trim']()['split'](';');if(_0x4da3f0[_0x28a3b9(0x15a)]!==0x2){_0x82e544++;return;}const _0x23a4cb=_0x4da3f0[0x0][_0x28a3b9(0x12e)](),_0x459aa7=parseFloat(_0x4da3f0[0x1]['trim']());if(!_0x23a4cb||isNaN(_0x459aa7)||_0x459aa7<=0x0){_0x82e544++;return;}price_check_items[_0x23a4cb]=_0x459aa7,addedCount++;});if(addedCount>0x0)chrome['storage']['local']['set']({'price_check_items':price_check_items},()=>{const _0x15050d=_0x9dc879;renderPriceCheckItems(),priceCheckMassInput['value']='',_0x82e544>0x0?alert('Added\x20'+addedCount+'\x20items.\x20'+_0x82e544+'\x20items\x20had\x20invalid\x20format\x20and\x20were\x20skipped.'):alert('Successfully\x20added\x20'+addedCount+_0x15050d(0x152));});else _0x82e544>0x0&&alert('No\x20valid\x20entries\x20found.\x20Please\x20use\x20the\x20format\x20SKU;maxprice\x20on\x20each\x20line.');}function copySkusToClipboard(){const _0x7126ef=_0x27ab39,_0x30f357=Object[_0x7126ef(0x16b)](price_check_items);if(_0x30f357['length']===0x0){alert('No\x20price\x20checks\x20available\x20to\x20copy.');return;}_0x30f357['sort']((_0x31122c,_0x591742)=>_0x31122c[0x0]['localeCompare'](_0x591742[0x0]));const _0x285871=_0x30f357['map'](([_0x52104d])=>_0x52104d)['join']('\x0a');navigator[_0x7126ef(0x14f)]['writeText'](_0x285871)[_0x7126ef(0x170)](()=>{const _0x528611=_0x7126ef;alert(_0x528611(0x127));})['catch'](_0x40893b=>{console['error']('Could\x20not\x20copy\x20text:\x20',_0x40893b),alert('Failed\x20to\x20copy\x20SKUs.');});}function copyMaxPriceToClipboard(){const _0x344d15=_0x27ab39,_0x541a17=Object['entries'](price_check_items);if(_0x541a17['length']===0x0){alert('No\x20price\x20checks\x20available\x20to\x20copy.');return;}_0x541a17['sort']((_0x517912,_0x11d48f)=>_0x517912[0x0]['localeCompare'](_0x11d48f[0x0]));const _0x4ead54=_0x541a17[_0x344d15(0x17e)](([_0x19a4e2,_0x5ba2af])=>_0x19a4e2+';'+_0x5ba2af)['join']('\x0a');navigator['clipboard']['writeText'](_0x4ead54)['then'](()=>{alert('SKUs\x20with\x20max\x20prices\x20copied\x20to\x20clipboard!');})[_0x344d15(0x180)](_0x5e4fd4=>{const _0x193e4a=_0x344d15;console['error']('Could\x20not\x20copy\x20text:\x20',_0x5e4fd4),alert(_0x193e4a(0x147));});}function renderPriceCheckItems(){const _0x4f543c=_0x27ab39;if(!priceCheckItemsContainer)return;priceCheckItemsContainer['innerHTML']='';const _0x229e7c=Object['entries'](price_check_items);if(_0x229e7c['length']===0x0){const _0x27912e=document[_0x4f543c(0x17c)]('p');_0x27912e[_0x4f543c(0x17a)]=_0x4f543c(0x133),_0x27912e['className']=_0x4f543c(0x12b),priceCheckItemsContainer[_0x4f543c(0x149)](_0x27912e);return;}_0x229e7c[_0x4f543c(0x157)]((_0x4bced1,_0x3f97ca)=>_0x4bced1[0x0]['localeCompare'](_0x3f97ca[0x0])),_0x229e7c['forEach'](([_0x3f3012,_0x58703f])=>{const _0x492c44=_0x4f543c,itemDiv=document['createElement']('div');itemDiv['className']='price-check-item';const itemDetails=document['createElement']('div');itemDetails['className']='price-check-item-details';const _0x222254=document['createElement']('div');_0x222254[_0x492c44(0x128)]=_0x492c44(0x124),_0x222254['textContent']='SKU:\x20'+_0x3f3012;const priceSpan=document['createElement']('div');priceSpan['className']='price-check-item-price',priceSpan['textContent']='Max\x20Price:\x20$'+_0x58703f['toFixed'](0x2),itemDetails['appendChild'](_0x222254),itemDetails['appendChild'](priceSpan);const _0x1f5d0c=document['createElement']('div');_0x1f5d0c['className']='price-check-item-actions';const _0xd1a015=document['createElement']('button');_0xd1a015['className']='price-check-item-edit',_0xd1a015[_0x492c44(0x17a)]='✎',_0xd1a015['title']='Edit\x20price',_0xd1a015['onclick']=()=>{const _0x123dc3=prompt('Edit\x20max\x20price\x20for\x20SKU\x20\x22'+_0x3f3012+'\x22:',_0x58703f['toFixed'](0x2));if(_0x123dc3!==null){const _0x4a10ea=parseFloat(_0x123dc3);!isNaN(_0x4a10ea)&&_0x4a10ea>0x0?(price_check_items[_0x3f3012]=_0x4a10ea,chrome['storage']['local']['set']({'price_check_items':price_check_items},()=>{renderPriceCheckItems();})):alert('Please\x20enter\x20a\x20valid\x20price\x20(greater\x20than\x200).');}};const deleteBtn=document[_0x492c44(0x17c)]('button');deleteBtn['className']='price-check-item-delete',deleteBtn['textContent']='×',deleteBtn['title']='Remove\x20price\x20check',deleteBtn[_0x492c44(0x138)]=()=>{const _0x1f7e16=_0x492c44;confirm(_0x1f7e16(0x12a)+_0x3f3012+'\x22?')&&(delete price_check_items[_0x3f3012],chrome['storage']['local'][_0x1f7e16(0x153)]({'price_check_items':price_check_items},()=>{renderPriceCheckItems();}));},_0x1f5d0c['appendChild'](_0xd1a015),_0x1f5d0c['appendChild'](deleteBtn),itemDiv['appendChild'](itemDetails),itemDiv['appendChild'](_0x1f5d0c),priceCheckItemsContainer['appendChild'](itemDiv);});}}));